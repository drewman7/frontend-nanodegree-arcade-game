function checkCollisions(){for(var e=0;e<allEnemies.length;e++)player.x+30>allEnemies[e].x&&player.x<allEnemies[e].x+allEnemies[e].width-30&&player.y<allEnemies[e].y+20&&player.y>allEnemies[e].y-20&&(resetPlayer(),score-=1,playerSuccess="Sorry, try again!")}function resetPlayer(){player.x=PLAYER_STARTING_X_COOR,player.y=PLAYER_STARTING_Y_COOR}function directions(){ctx.font="12px sans-serif",ctx.fillStyle="white",ctx.textAlign="left",ctx.fillText("Directions:  Use the arrow keys to move your character.  Try to get to the water!",20,565),ctx.fillText("Press the space bar to change your character.",20,580)}function scoreBoard(){ctx.font="bold 24px sans-serif",ctx.fillStyle="yellow",ctx.textAlign="left",ctx.fillText("Score:  "+score,20,75)}function encouragement(){ctx.font="bold 24px sans-serif",ctx.fillStyle="Good job!"===playerSuccess?"white":"red",ctx.textAlign="right",ctx.fillText(playerSuccess,485,75)}function getRandomArbitrary(e,t){return Math.random()*(t-e)+e}var Enemy=function(){this.sprite="images/enemy-bug.png",this.x=0,this.y=63,this.width=101,this.height=83,this.dt=getRandomArbitrary(.2,2)};Enemy.prototype.update=function(){this.x=this.x>ctx.canvas.width?-101:this.x+4*this.dt,checkCollisions()},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(){this.sprite=["images/char-boy.png","images/char-cat-girl.png","images/char-horn-girl.png","images/char-pink-girl.png","images/char-princess-girl.png","images/enemy-bug.png"],this.currentSpriteIndex=0,this.x=PLAYER_STARTING_X_COOR,this.y=PLAYER_STARTING_Y_COOR,this.dt=40,this.width=101,this.height=83};Player.prototype.update=function(){},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite[this.currentSpriteIndex]),this.x,this.y),202===this.x&&400===this.y&&directions(),scoreBoard(),encouragement()},Player.prototype.handleInput=function(e){"left"===e&&this.x-101>=0&&(this.x=this.x-101),"right"===e&&this.x+101<ctx.canvas.width&&(this.x=this.x+101),"up"===e&&(this.y>83?this.y=this.y-83:(resetPlayer(),score+=1,playerSuccess="Good job!")),"down"===e&&this.y+83<ctx.canvas.height-200&&(this.y=this.y+83),"space"===e&&(this.currentSpriteIndex=this.currentSpriteIndex+1===this.sprite.length?0:this.currentSpriteIndex+1)};var PLAYER_STARTING_X_COOR=202,PLAYER_STARTING_Y_COOR=400,allEnemies=[new Enemy,new Enemy,new Enemy];allEnemies[1].y=146,allEnemies[2].y=229;var player=new Player;Resources.load(player.sprite);var score=0,playerSuccess="";document.addEventListener("keyup",function(e){var t={37:"left",38:"up",39:"right",40:"down",32:"space"};player.handleInput(t[e.keyCode])});